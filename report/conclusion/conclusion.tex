\section{Conclusion}

Throughout this thesis we have created and evaluated PET, a tool for estimating
power consumption on existing as well as non-existing computer architectures.
PET uses output from gem5 together with a set of weighted parameters to estimate
energy consumption of a program on a given hardware model. The weighted
parameters are selected by investigating the pipeline of an ARM Cortex-A9
processor. We have run a set of workloads on the hardware platform an logged
their current drain over time. Further, the results was used as input for a
genetic algorithm that mapped the correct energy usage to each architectural
event.

PET is not designed to be as accurate as possible, but to assist hardware
developers as early in the design stage as possible. As opposed to classical
methods, PET can be applied to a design already when only a simulation model
exists. Well known tools such as Wattch or McPAT also utilizes a simulator, but
requires a more knowledge about the final hardware, e.g. RTL and process
technology. Regardless, PET is able to estimate current drain within 10~\% of
actual drain when testing against the ARM Cortex-A9 processor.

Since PET is tool meant to be used early and rapidly in the design phase, it has
to be fast and easy to use. PET will predict power usage from log files, reading
of a speed of 133 MB/s on when run on an Intel Core i7 4820, and needs only the
log file and a set of weights to operate. Even when log files easily expands to
more than 10s of gigabytes, running PET is cheaper in terms of time than running
gem5.

An excessive amount of time has been used for tweaking the PET, gem5 and the
genetic algorithm to match our hardware platform as good as possible, but still,
we believe that the effort needed to port our methods to a new hardware platform
or architecture is much less.  The genetic algorithm was in our case able to
find good weights within few hours, and with carefully selected power consuming
events it is likely that this is the same for other architectures. Unrealized
hardware still needs similar hardware to generate data for the weights.

Our observation is that PET allows evaluation of the big picture much easier and
earlier in the design stage than other existing options, simply because it
calculates power with less hardware details. We hope that PET will provide
useful when developing both tiles for SHMAC and processors in general.

All in all, PET or other tools built from the same concept of weighting
architectural events are indeed possible for a set of scenarios, but it has not
yet been validated for any other architectures. The process of settings weights
for PET seems cumbersome, but for most practical settings the most important
thing is to have the weights reasonably proportioned amongst themselves.
